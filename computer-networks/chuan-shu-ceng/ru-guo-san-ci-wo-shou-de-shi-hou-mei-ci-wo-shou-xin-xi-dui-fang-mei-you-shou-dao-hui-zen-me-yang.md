---
description: 如果三次握手的时候每次握手信息对方没有收到会怎么样？
---

# 如果三次握手的时候每次握手信息对方没有收到会怎么样？

## 第一次握手服务器没收到

服务器没收到所以不会有动作。

客户端等待来自服务器的 SYNACK 包超时，选择重传。若重传次数达到限制后仍没有收到，则建立连接的系统调用返回 -1。

## 第二次握手客户端没收到

客户端动作和上一节一样。

服务器将阻塞在 accept\(\) 系统调用处等待 client 再次发送 ACK 包。超时后，同样会采取类似客户端的超时重传机制，若重传次数达到限制后仍然没有回应，则 accept\(\) 系统调用返回 -1，服务器端连接建立失败。

## 第三次握手服务器没收到

客户端发送完ACK包后认为连接已经建立，故开始传输数据。

服务器未接收到客户端发送过来的 ACK 包，同样会采取类似客户端的超时重传机制，若重传次数达到限制后仍然没有回应，则 accept\(\) 系统调用返回 -1，服务器端连接建立失败。此后，服务器端接收到来自客户端发送来的数据时会发送 RST 包给客户端，消除客户端单方面建立连接的状态。

