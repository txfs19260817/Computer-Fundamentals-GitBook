---
description: 主从复制的过程是什么？三个线程是什么？
---

# 主从复制的过程是什么？

## 主从复制

主要涉及三个线程：binlog 线程、I/O 线程和 SQL 线程。

* binlog 线程：在主库上把数据更改写入到二进制日志（Binary log）上；
* I/O 线程：从库读取主库上的二进制日志，并复制到自己的中继日志（Relay log）上；
* SQL 线程：负责读取中继日志，解析出主库已经执行的数据更改并在从库上重放（Replay）。

![&#x5C06;&#x590D;&#x5236;&#x4E8B;&#x4EF6;&#x4F20;&#x9012;&#x5230;&#x66F4;&#x591A;&#x7684;&#x5907;&#x5E93;](../../.gitbook/assets/image%20%2835%29.png)

如图中间的备库设置了`log_slave_updates`选项，可以令其变成其他备库的“主库”。设置该选项后，一个事件在自己上已经重放完毕之后，会多出一个写入自己的二进制日志操作，供第二个备库复制。如此第二个备库就不用连接真正的主库了。

## Reference

1. [http://www.cyc2018.xyz/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html](http://www.cyc2018.xyz/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html#%E5%85%AD%E3%80%81%E5%A4%8D%E5%88%B6)



